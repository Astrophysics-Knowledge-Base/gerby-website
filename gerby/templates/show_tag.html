{% extends "layout.html" %}

{% block title %}Tag {{ tag.tag }}{% endblock %}

{% block body %}
<h2>Tag {{ tag.tag }}</h2>

{% if breadcrumb %}
  <ul class="breadcrumb">
  {% for parent in breadcrumb %}
    <li><a href="{{ tagURL(parent.tag) }}" data-tag="{{ parent.tag }}">{{ parent.type | capitalize }} {{ parent.ref }}: {{ parent.labelname.name }}</a>
  {% endfor %}
  </ul>
{% endif %}

<div class="html">
  {{ html | safe }}

  {% if tree %}
    <ul class="tree">
    {% for item in tree recursive %}
      <li>{{ item.type | capitalize }} <a href="{{ tagURL(item.tag) }}" data-tag="{{ item.tag }}">{{ item.ref }}</a>{% if item.labelname.name %}: {{ item.labelname.name | safe }}{% endif %}
      {% if item.children %}
        <ul>{{ loop(item.children) }}</ul>
      {% endif %}
    {% endfor %}
    </ul>
  {% endif %}

  {% if footnotes %}
    <section id="footnotes">
    {% for footnote in footnotes %}
      <div id="footnote-{{ loop.index }}"><a href="#footnote-{{ loop.index }}-mark">[{{ loop.index }}]</a> {{ footnote.html | safe }}</div>
    {% endfor %}
    </section>
  {% endif %}
</div>
{% endblock %}
