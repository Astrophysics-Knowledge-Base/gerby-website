{% extends "layout.html" %}

{% block title %}History for tag {{ tag.tag }}{% endblock %}

{% block head %}
  <script type="text/javascript" src="/static/js/history.js"></script>
{% endblock %}

{% block breadcrumb %}

{% for parent in breadcrumb %}
  <li{% if loop.last %} class="active"{% endif %}>{{ parent.type | capitalize }} <a href="{{ tagURL(parent.tag) }}" data-tag="{{ parent.tag }}">{{ parent.ref }}</a>{% if parent.name %}: {{ parent.name }}{% endif %}
  {% if loop.last %}<span id="citation">(<a href="{{ tagURL(parent.tag) }}/cite">cite</a>)</span>{% endif %}
{% endfor %}

{% endblock %}

{% macro neighboursMacro(neighbours) %}

<ul class="neighbours">
{% if neighbours[0] %}
  <li class="left"><a href="{{ tagURL(neighbours[0].tag) }}">previous {{ neighbours[0].type }}</a>
{% endif %}
{% if neighbours[1] %}
  <li class="right"><a href="{{ tagURL(neighbours[1].tag) }}">next {{ neighbours[1].type }}</a>
{% endif %}
</ul>
{% if neighbours[0] or neighbours[1] %}<br style="clear:both">{% endif %}

{% endmacro %}

{% block hamburger %}
  {{ neighboursMacro(neighbours) }}
{% endblock %}

{% block body %}
<h2>History for tag <span class="tag">{{ tag.tag }}</span></h2>


<table class="table table-hover table-sm" id="history">
  <thead>
    <tr>
      <th>type</th>
      <th>time</th>
      <th>link</th>
    </tr>
  </thead>

  <tbody>
{% for change in changes %}
<tr>
  <td>
    {% if change.action == "creation" %}
      created statement with label <span class="label">{{ change.label }}</span> in <span class="filename">{{ change.filename }}.tex</span>
    {% elif change.action == "tag" %}
      assigned tag <span class="tag">{{ change.tag.tag }}</span>
    {% elif change.action == "statement" %}
      changed the statement</td>
    {% elif change.action == "move file" %}
      moved the statement to file <span class="filename">{{ change.filename }}.tex</span><!-- TODO use colours for filenames? -->
    {% elif change.action == "label" %}
      changed the label to <span class="label">{{ change.label }}</span>
    {% elif change.action == "proof" %}
      changed the proof
    {% else %}
      <strong>if you see this, something went wrong</strong>
    {% endif %}

    <!-- TODO add commit message in different TR with colspan=3! will lead to complicated CSS though-->

    <pre class="commit-message">{{ change.hash.log }}</pre>
  </td>

  <td>{{ change.time }}</td>

  <td><a href="#" class="commit">{{ change.hash.hash[0:7] }}</td> <!-- TODO build link -->
</tr>
{% endfor %}

    <tr>
      <td>created statement with label <span class="label">lemma-same-cohomology-adequate</span> in <span class="filename">descent.tex</span>
        <pre class="commit-message">Adequate modules

This material is a bit speculative. The idea is to find the
smallest abelian subcategory of all sheaves of modules on a big
site which contains the quasi-coherent ones. We succeed in doing
this and characterizing these sheaves. However, there are some
further issues with this category, one of them being that it
isn't closed under tensor product...</pre>
      </td>
      <td>July 20, 2011</td>
      <td><a href="https://github.com/stacks/stacks-project/blob/1c0757461e412e13bf7ffe5e281aa133446d1607/descent.tex#L2074-L2091" class="commit">1c07574</a></td>
    </tr>

    <tr>
      <td>assigned tag <span class="tag">06VM</span></td>
      <td>July 20, 2011</td>
      <td></td>
    </tr>

    <tr>
      <td>moved to <span class="filename">adequate.tex</span></td>
      <td>July 30, 2011</td>
      <td><a href="https://github.com/stacks/stacks-project/commit/0f99042c6595b2d0f2d8f9e639047696a9b7ebd4/adequate.tex#diff-084313bce66ab8710d3397b9b4ae451bR1005" class="commit">0f99042</a></td>
    </tr>
  </tbody>
</table>

{% endblock %}

{% block sidebar %}
  <div id="interaction">
  {{ neighboursMacro(neighbours) }}
  </div>

  <div id="information">
  </div>
{% endblock %}


