{% extends "layout.html" %}

{% block title %}Statistics for tag {{ tag.tag }}{% endblock %}

{% block head %}
  <script type="text/javascript" src="/static/js/toggle.js"></script>
{% endblock %}

{% block breadcrumb %}
  {{ macros.breadcrumb(breadcrumb) }}
{% endblock %}

{% block hamburger %}
  {{ macros.tagHamburger(tag, neighbours, "/statistics", dependencies) }}
{% endblock %}

{% block body %}
<h2>Statistics of tag <span class="tag">{{ tag.tag }}</span></h2>
<p><a href="/tag/{{ tag.tag }}">Go back to the tag's page</a>.

{% if statistics %}
<table class="table">
  {% if statistics.consequences != -1 %}
  <tr>
    <td>number of results (indirectly) using this tag</td>
    <td>{{ statistics.consequences }}</td>
  </tr>
  {% endif %}
  {% if statistics.preliminaries != -1 %}
  <tr>
    <td>number of results used</td>
    <td>{{ statistics.preliminaries }}</td>
  </tr>
  {% endif %}
  {% if statistics.chapters != -1 %}
  <tr>
    <td>number of chapters used</td>
    <td>{{ statistics.chapters }}</td>
  </tr>
  {% endif %}
  {% if statistics.sections != -1 %}
  <tr>
    <td>number of sections used</td>
    <td>{{ statistics.sections }}</td>
  </tr>
  {% endif %}
</table>
{% else %}
<h3>No computed statistics for this tag</h3><br/>
{% endif %}

{% if dependencies | length > 0 %}
<h3 id="dependencies">Tags (directly) using this result</h3>
<ul>
{% for dependency in dependencies %}
  <li>{{ dependency.tag.type | capitalize }} <a href="/tag/{{ dependency.tag.tag }}" data-tag="{{ dependency.tag.tag }}">{{ dependency.tag.ref }}</a>
  in {{ dependency.parent.type | capitalize }} <a href="/tag/{{ dependency.parent.tag }}" data-tag="{{ dependency.parent.tag }}">{{ dependency.parent.ref }}</a>: {{ dependency.parent.name }}
    <br>(go to <a href="/tag/{{ dependency.tag.tag }}/statistics">statistics</a>)
{% endfor %}
</ul>
{% else %}
<h3 id="dependencies">No tags currently use this result</h3>
{% endif %}

{% endblock %}

{% block sidebar %}
  {{ macros.tagSidebar(tag, neighbours, "/statistics", dependencies) }}
{% endblock %}

